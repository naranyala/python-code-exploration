# webui_bindings.py
from cffi import FFI

ffi = FFI()

# Define the C interface
ffi.cdef("""
    // Basic types
    typedef void* webui_window_t;
    typedef size_t webui_browser_t;
    typedef size_t webui_event_t;

    // Functions
    void webui_show(webui_window_t* window, const char* content, webui_browser_t browser);
    webui_window_t* webui_new_window();
    void webui_bind(webui_window_t* window, const char* element, void (*func)(webui_event_t e));
    void webui_loop();
    void webui_exit();
    void webui_set_root_folder(webui_window_t* window, const char* path);
    void webui_set_file_handler(webui_window_t* window, void (*func)(webui_event_t e));
    void webui_script(webui_window_t* window, const char* script, size_t timeout, char* buffer, size_t buffer_length);
    void webui_run(webui_window_t* window, const char* script);
    void webui_set_icon(webui_window_t* window, const char* icon, const char* icon_type);
""")

# Load the library
# Note: On Windows it might be 'webui-2.dll', on Linux 'libwebui-2.so', on macOS 'libwebui-2.dylib'
lib = ffi.dlopen('webui-2')  # Adjust based on your platform
