
#!/usr/bin/env bash

# Reverse mouse scroll direction on Wayland via hwdb
# Compatible with Debian-based systems (e.g. Ubuntu, Pop!_OS)

set -e

DEVICE_MATCH='mouse:usb'  # You can adjust this string to match your device
HWDB_PATH='/etc/udev/hwdb.d/90-mouse-scroll.hwdb'

# Create config
create_hwdb() {
    echo "Creating hwdb override..."

    sudo tee "$HWDB_PATH" > /dev/null <<EOF
evdev:$DEVICE_MATCH
 EVDEV_ABS_00_INVERT=1
 EVDEV_ABS_01_INVERT=1
EOF
}

# Apply changes
reload_udev() {
    echo "Updating udev rules..."
    sudo systemd-hwdb update
    sudo udevadm trigger /dev/input/*
}

# Reverse logic
main() {
    create_hwdb
    reload_udev
    echo "âœ… Mouse scroll reversed. Please reboot for full effect."
}

main
